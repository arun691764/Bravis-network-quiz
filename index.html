<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Brevis Network Quiz</title>
<style>
  body { font-family: 'Poppins', sans-serif; background: linear-gradient(135deg,#0f2027,#203a43,#2c5364); color:#fff; text-align:center; margin:0; padding:20px; }
  h1{ color:#ffcc00; text-shadow:0 0 8px #ffcc00; margin:6px 0; font-size:2rem }
  h2{ color:#00e0ff; margin:0 0 12px 0; text-shadow:0 0 8px #00e0ff }
  .meta { color:#cbd5e1; margin-bottom:10px; font-size:0.95rem }
  .counter { font-weight:800; color:#06b6d4; margin-bottom:12px }
  .question { background: rgba(255,255,255,0.06); border-radius:12px; padding:14px; margin:14px auto; width:90%; max-width:700px; box-shadow:0 6px 20px rgba(2,6,23,0.6) }
  .qtitle{ color:#ffd700; font-weight:700; margin-bottom:8px }
  .option{ background: rgba(255,255,255,0.12); padding:10px; border-radius:8px; margin:8px 0; cursor:pointer; transition:all .15s }
  .option:hover{ transform:translateY(-3px); background: rgba(255,255,255,0.18) }
  .option.correct{ background:#198754; color:#fff }
  .option.wrong{ background:#dc3545; color:#fff }
  #submitBtn,#resetBtn{ padding:10px 18px; border-radius:8px; border:none; cursor:pointer; margin:10px; font-weight:700 }
  #submitBtn{ background:#06b6d4; color:#022 }
  #resetBtn{ background:transparent; color:#fff; border:1px solid rgba(255,255,255,0.08) }
  #feedback{ display:none; margin:14px auto; background:rgba(255,255,255,0.06); padding:12px; border-radius:10px; width:85%; max-width:520px }
  .small{ font-size:0.88rem; color:#94a3b8 }
</style>
</head>
<body>

  <h1>üß† Test Your Knowledge!</h1>
  <h2>Brevis Network Quiz</h2>
  <div class="meta">Participants completed: <span id="displayCount" class="counter">0</span> <span class="small" id="detailCount"></span></div>

  <div id="quiz"></div>

  <button id="submitBtn">Submit</button>
  <button id="resetBtn">Reset</button>

  <div id="feedback"></div>

<script>
const displayOffset = 55;  // minimum visible count = 55

const LS_KEY_COUNT = 'brevis_quiz_count_v1';
const LS_KEY_DONE_PREFIX = 'brevis_quiz_done_';

const questions = [
  { id:1, text:"What is Brevis Network primarily focused on?", options:["NFT Marketplace","Zero-knowledge coprocessor","Social Media Platform","Gas Station Network"], answer:1 },
  { id:2, text:"Which architecture does its zkVM Pico use?", options:["Monolithic","Glue-and-coprocessor","Layer-3 only","Chain-specific"], answer:1 },
  { id:3, text:"Brevis supports historical on-chain data access from multiple chains ‚Äî this feature is called?", options:["State Read","Event Replay","ZK Data Coprocessor","Token Swap"], answer:2 },
  { id:4, text:"In 'Say Bye to Airdrops...' blog, which model replaces one-time airdrops?", options:["One-time Drop","Continuous Protocol Incentivization","Referral Bonus","Lock-Up Rewards"], answer:1 },
  { id:5, text:"Which partner is mentioned for zkVM acceleration integration?", options:["Uniswap","PancakeSwap","Linea","MetaMask Card Users"], answer:2 },
  { id:6, text:"Which category best describes Brevis's offering for smart contracts?", options:["Gaming Engine","Cloud Storage","Trust-free Off-chain Compute","Payment Processor"], answer:2 }
];

function getStoredCount(){ const raw = localStorage.getItem(LS_KEY_COUNT); return raw ? parseInt(raw,10) : 0; }
function setStoredCount(n){ localStorage.setItem(LS_KEY_COUNT, String(n)); }
function browserHasCompleted(){ return localStorage.getItem(LS_KEY_DONE_PREFIX+'main')==='1'; }
function markBrowserCompleted(){ localStorage.setItem(LS_KEY_DONE_PREFIX+'main','1'); }

function updateDisplayCount(){
  const real = getStoredCount();
  const displayVal = Math.max(displayOffset, real);
  const displayEl = document.getElementById('displayCount');
  const detailEl = document.getElementById('detailCount');
  displayEl.textContent = displayVal > real ? displayVal + '+' : displayVal;
  detailEl.textContent = displayVal > real ? `(actual: ${real})` : '';
}

function renderQuiz(){
  const container = document.getElementById('quiz');
  container.innerHTML = '';
  questions.forEach((q,qi)=>{
    const qDiv = document.createElement('div');
    qDiv.className='question';
    qDiv.innerHTML=`<div class="qtitle">${qi+1}. ${q.text}</div>`;
    q.options.forEach((opt,oi)=>{
      const o=document.createElement('div');
      o.className='option';
      o.dataset.q=q.id;
      o.dataset.opt=oi;
      o.innerText=opt;
      o.addEventListener('click',()=>{
        document.querySelectorAll(`.option[data-q="${q.id}"]`).forEach(x=>x.classList.remove('selected','correct','wrong'));
        o.classList.add('selected');
        const correctIndex=q.answer;
        if(oi===correctIndex){ o.classList.add('correct'); }
        else{
          o.classList.add('wrong');
          const correctOpt=document.querySelector(`.option[data-q="${q.id}"][data-opt="${correctIndex}"]`);
          if(correctOpt) correctOpt.classList.add('correct');
        }
      });
      qDiv.appendChild(o);
    });
    container.appendChild(qDiv);
  });
}

document.getElementById('submitBtn').addEventListener('click',()=>{
  const selected=document.querySelectorAll('.option.selected');
  let score=0; const answeredQ=new Set();
  selected.forEach(opt=>{
    const qid=Number(opt.dataset.q);
    const q=questions.find(x=>x.id===qid);
    if(q && Number(opt.dataset.opt)===q.answer) score++;
    answeredQ.add(qid);
  });
  const total=questions.length;
  const fb=document.getElementById('feedback');
  fb.style.display='block';

  if(!browserHasCompleted() && answeredQ.size>0){
    const current=getStoredCount();
    setStoredCount(current+1);
    markBrowserCompleted();
    updateDisplayCount();
  }

  let msg='';
  if(score===total) msg="üéâ Excellent! You got all answers correct!";
  else if(score>=Math.ceil(total/2)) msg="üëç Good job! But you can do even better next time!";
  else msg="üòÖ Keep learning! Try again to improve your score.";

  fb.innerHTML=`<div style="font-weight:800;margin-bottom:8px">üéØ Score: ${score} / ${total}</div><div>${msg}</div>`;
  fb.scrollIntoView({behavior:'smooth'});
});

document.getElementById('resetBtn').addEventListener('click',()=>{
  renderQuiz();
  document.getElementById('feedback').style.display='none';
});

renderQuiz();
updateDisplayCount();
</script>
</body>
</html>
